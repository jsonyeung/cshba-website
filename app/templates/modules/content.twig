{% if not layouts is defined %}
    {% set layouts = post.get_field('modular_layout') %}
{% endif %}

{% for layout in layouts %}
    {% set module = layout.acf_fc_layout %}

    {% if module == 'one_col' %}
        <div class='l-module--1col u-margin-bottom-0'>
            <div>
                {{layout.content}}
            </div>
        </div> 
    {% elseif module == 'one_col_tip' %}
        <div class='l-module--1col-tip u-margin-top-0 u-margin-bottom-0'>
            <div>
                {{layout.content}}
            </div>
            <div>
                <span class='o-label u-block u-color-secondary-accent'>{{layout.tip.label}}</span>
                <p class='u-color-secondary-dark'>{{layout.tip.description}}</p>
            </div>
        </div>
    {% elseif module == 'two_col' %}
        {% if not layout.heading is empty %}
        <div class='l-module--2col'>
            <div>
                <h3 class='u-flex-full'>{{layout.heading}}</h3> 
            </div>
        </div>
        {% endif %}
        <div class='l-module--2col u-margin-bottom-0'>
            <div>{{layout.first_column}}</div>
            <div>{{layout.second_column}}</div>
        </div>
    {% elseif module == 'img' %}
        <figure class='l-module--img{{layout.wide_image ? "-wide"}}'>
            <img src='{{TimberImage(layout.image).src}}'>
            <figcaption>{{layout.caption}}</figcaption>
        </figure>
    {% elseif module == 'full_img' %}
        <figure class='l-module--img-full'>
            <img src='{{TimberImage(layout.image).src }}'>
            <figcaption>{{layout.caption}}</figcaption>
        </figure>
    {% endif %}

    {% block custom_layouts %}
    {% endblock %}
{% endfor %}